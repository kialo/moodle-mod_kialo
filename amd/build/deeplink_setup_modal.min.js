define("mod_kialo/deeplink_setup_modal",["exports","core/str"],(function(_exports,_str){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setupModal=void 0;_exports.setupModal=async(modalFn,deeplinkUrl)=>{let modal;document.getElementById("id_kialo_select_discussion").addEventListener("click",(async()=>{modal=await modalFn({title:await(0,_str.getString)("select_discussion","mod_kialo"),body:'<iframe class="kialo-iframe" src="'.concat(deeplinkUrl,'"></iframe>'),large:!0}),modal.getModal().addClass("kialo-modal"),modal.show()})),window.addEventListener("message",(event=>{if("kialo_discussion_selected"!==event.data.type)return;document.querySelector("input[name=discussion_url]").value=event.data.discussionurl,document.querySelector("input[name=discussion_title]").value=event.data.discussiontitle;const nameInput=document.querySelector("input[name=name]");nameInput.value||(nameInput.value=event.data.discussiontitle),modal.hide(),modal.destroy()}))}}));

//# sourceMappingURL=deeplink_setup_modal.min.js.map