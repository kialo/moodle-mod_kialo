define("mod_kialo/discussion_selection",["exports","core/modal_factory","core/str"],(function(_exports,_modal_factory,_str){var obj;
/**
   * Javascript code for module instance settings form.
   *
   * @module      mod_kialo/discussion_selection
   * @copyright   2025 onwards, Kialo GmbH <support@kialo-edu.com>
   * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * @param {string} deeplinkUrl - The url for discussion selection in Kialo
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=(obj=_modal_factory)&&obj.__esModule?obj:{default:obj};_exports.init=async deeplinkUrl=>{let modal;document.getElementById("id_kialo_select_discussion").addEventListener("click",(async()=>{modal=await _modal_factory.default.create({title:await(0,_str.getString)("select_discussion","mod_kialo"),body:'<iframe class="kialo-iframe" src="'.concat(deeplinkUrl,'"></iframe>'),large:!0}),modal.show()})),window.addEventListener("message",(event=>{if("kialo_discussion_selected"!==event.data.type)return;document.querySelector("input[name=discussion_url]").value=event.data.discussionurl,document.querySelector("input[name=discussion_title]").value=event.data.discussiontitle;const nameInput=document.querySelector("input[name=name]");nameInput.value||(nameInput.value=event.data.discussiontitle),modal&&(modal.hide(),modal.destroy())}))}}));

//# sourceMappingURL=discussion_selection.min.js.map